{"version":3,"file":"weather-area-input-field.js","sourceRoot":"","sources":["../../src/components/weather-area-input-field.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;AAAA,OAAO,EAAE,UAAU,EAAE,GAAG,EAAE,IAAI,EAAE,MAAM,KAAK,CAAC;AAC5C,OAAO,EAAE,aAAa,EAAE,QAAQ,EAAE,KAAK,EAAE,MAAM,mBAAmB,CAAC;AAEnE,OAAO,EAAE,UAAU,EAAE,mBAAmB,EAAE,MAAM,iBAAiB,CAAC;AAClE,OAAO,EAAE,kBAAkB,EAAE,MAAM,UAAU,CAAC;AAC9C,OAAO,EAAE,gBAAgB,EAAE,MAAM,SAAS,CAAC;AAGpC,IAAM,qBAAqB,GAA3B,MAAM,qBAAsB,SAAQ,UAAU;IAA9C;;;QACN,+CAAiB,IAAI,kBAAkB,CAAC,IAAI,CAAC,EAAC;QAC9C,iDAAmB,CAAC,EAAC;QAEM,qBAAgB,GAAoB,EAAE,CAAC;QACtC,wBAAmB,GAC9C,gBAAgB,CAAC,mBAAmB,CAAC;IAyEvC,CAAC;IAtCA,KAAK;QACJ,IAAI,CAAC,IAAI,CAAC,KAAK,EAAE,CAAC;IACnB,CAAC;IAEkB,MAAM;QACxB,OAAO,IAAI,CAAA;mBACM,uBAAA,IAAI,+EAAgB;;;;;;;;;;eAUxB,uBAAA,IAAI,8EAAe;;;QAG1B,IAAI,CAAC,gBAAgB,CAAC,GAAG,CAC1B,CAAC,IAAI,EAAE,EAAE,CAAC,IAAI,CAAA,iBAAiB,IAAI,IAAI,IAAI,WAAW,CACtD;;;;;GAKJ,CAAC;IACH,CAAC;;;;;uFA1De,KAAkB;IACjC,KAAK,CAAC,cAAc,EAAE,CAAC;IAEvB,MAAM,IAAI,GAAG,KAAK,CAAC,aAAgC,CAAC;IAEpD,MAAM,SAAS,GAAG,IAAI,QAAQ,CAAC,IAAI,CAAC,CAAC;IAErC,MAAM,IAAI,GAAG,SAAS,CAAC,GAAG,CAAC,MAAM,CAAW,CAAC;IAE7C,uBAAA,IAAI,4CAAe,CAAC,QAAQ,CAAC,QAAQ,EAAE;QACtC,MAAM,EAAE,MAAM;QACd,IAAI;KACJ,CAAC,CAAC;AACJ,CAAC;qFAEc,KAAiB;IAC/B,KAAK,CAAC,eAAe,EAAE,CAAC;IAExB,MAAM,YAAY,GAAG,IAAI,CAAC,GAAG,EAAE,CAAC;IAEhC,IAAI,YAAY,GAAG,uBAAA,IAAI,8CAAiB,GAAG,IAAI,CAAC,mBAAmB,EAAE,CAAC;QACrE,OAAO;IACR,CAAC;IAED,uBAAA,IAAI,0CAAoB,YAAY,MAAA,CAAC;IAErC,MAAM,KAAK,GAAG,KAAK,CAAC,MAA0B,CAAC;IAE/C,uBAAA,IAAI,4CAAe,CAAC,QAAQ,CAAC,YAAY,EAAE,EAAE,KAAK,EAAE,KAAK,CAAC,KAAK,EAAE,CAAC,CAAC;AACpE,CAAC;AA+Be,4BAAM,GAAG;IACxB,UAAU;IACV,mBAAmB;IACnB,GAAG,CAAA;;;;GAIF;CACD,AARqB,CAQpB;AA1EyB;IAA1B,QAAQ,CAAC,EAAE,IAAI,EAAE,KAAK,EAAE,CAAC;+DAAwC;AACtC;IAA3B,QAAQ,CAAC,EAAE,IAAI,EAAE,MAAM,EAAE,CAAC;kEACW;AAEvB;IAAd,KAAK,CAAC,MAAM,CAAC;mDAAwB;AAR1B,qBAAqB;IADjC,aAAa,CAAC,0BAA0B,CAAC;GAC7B,qBAAqB,CA+EjC","sourcesContent":["import { LitElement, css, html } from \"lit\";\r\nimport { customElement, property, query } from \"lit/decorators.js\";\r\nimport { AreaSuggestions } from \"./types\";\r\nimport { base_style, dialog_button_style } from \"./common-styles\";\r\nimport { ScopedEventManager } from \"./events\";\r\nimport { DEFAULT_SETTINGS } from \"./const\";\r\n\r\n@customElement(\"weather-area-input-field\")\r\nexport class WeatherAreaInputField extends LitElement {\r\n\t#event_manager = new ScopedEventManager(this);\r\n\t#last_input_time = 0;\r\n\r\n\t@property({ type: Array }) area_suggestions: AreaSuggestions = [];\r\n\t@property({ type: Number }) input_area_debounce: number =\r\n\t\tDEFAULT_SETTINGS.INPUT_AREA_DEBOUNCE;\r\n\r\n\t@query(\"form\") form!: HTMLFormElement;\r\n\r\n\t#on_submit_area(event: SubmitEvent) {\r\n\t\tevent.preventDefault();\r\n\r\n\t\tconst form = event.currentTarget as HTMLFormElement;\r\n\r\n\t\tconst form_data = new FormData(form);\r\n\r\n\t\tconst area = form_data.get(\"area\") as string;\r\n\r\n\t\tthis.#event_manager.dispatch(\"search\", {\r\n\t\t\tmethod: \"area\",\r\n\t\t\tarea,\r\n\t\t});\r\n\t}\r\n\r\n\t#on_input_area(event: InputEvent) {\r\n\t\tevent.stopPropagation();\r\n\r\n\t\tconst current_time = Date.now();\r\n\r\n\t\tif (current_time - this.#last_input_time < this.input_area_debounce) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tthis.#last_input_time = current_time;\r\n\r\n\t\tconst input = event.target as HTMLInputElement;\r\n\r\n\t\tthis.#event_manager.dispatch(\"input-area\", { value: input.value });\r\n\t}\r\n\r\n\treset() {\r\n\t\tthis.form.reset();\r\n\t}\r\n\r\n\tprotected override render(): unknown {\r\n\t\treturn html`\r\n\t\t\t<form @submit=${this.#on_submit_area}>\r\n\t\t\t\t<label>\r\n\t\t\t\t\t<span class=\"sr-only\">地域名を入力する</span>\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\tpart=\"input\"\r\n\t\t\t\t\t\tclass=\"dialog-input\"\r\n\t\t\t\t\t\tname=\"area\"\r\n\t\t\t\t\t\tlist=\"areas\"\r\n\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t@input=${this.#on_input_area}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<datalist id=\"areas\">\r\n\t\t\t\t\t\t${this.area_suggestions.map(\r\n\t\t\t\t\t\t\t(area) => html`<option value=${area}>${area}</option>`\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</datalist>\r\n\t\t\t\t</label>\r\n\t\t\t\t<button part=\"search\" class=\"dialog-btn\">検索する</button>\r\n\t\t\t</form>\r\n\t\t`;\r\n\t}\r\n\r\n\tstatic override styles = [\r\n\t\tbase_style,\r\n\t\tdialog_button_style,\r\n\t\tcss`\r\n\t\t\tinput {\r\n\t\t\t\twidth: 100%;\r\n\t\t\t}\r\n\t\t`,\r\n\t];\r\n}\r\n\r\ndeclare global {\r\n\tinterface HTMLElementTagNameMap {\r\n\t\t\"weather-area-input-field\": WeatherAreaInputField;\r\n\t}\r\n}\r\n"]}