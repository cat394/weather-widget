{"version":3,"file":"weather-search.js","sourceRoot":"","sources":["../../src/components/weather-search.ts"],"names":[],"mappings":"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","sourcesContent":["import \"./weather-icon\";\r\nimport \"./weather-zipcode-input-field\";\r\nimport \"./weather-area-input-field\";\r\nimport { LitElement, css, html } from \"lit\";\r\nimport { customElement, property, query } from \"lit/decorators.js\";\r\nimport { WeatherZipcodeInputField } from \"./weather-zipcode-input-field\";\r\nimport { WeatherAreaInputField } from \"./weather-area-input-field\";\r\nimport {\r\n\tanimation_style,\r\n\tbase_style,\r\n\tdialog_button_style,\r\n} from \"./common-styles\";\r\nimport { AreaSuggestions } from \"./types\";\r\nimport { ScopedEventManager } from \"./events\";\r\nimport { DEFAULT_SETTINGS } from \"./const\";\r\n\r\n@customElement(\"weather-search\")\r\nexport class WeatherSearch extends LitElement {\r\n\t#event_manager = new ScopedEventManager(this);\r\n\r\n\t@property({ type: Boolean }) open = false;\r\n\t@property({ type: Array }) area_suggestions: AreaSuggestions = [];\r\n\t@property({ type: Number }) input_area_debounce: number =\r\n\t\tDEFAULT_SETTINGS.INPUT_AREA_DEBOUNCE;\r\n\t@property() search_methods = \"all\";\r\n\r\n\t@query(\"weather-zipcode-input-field\")\r\n\tzipcode_input_field!: WeatherZipcodeInputField;\r\n\t@query(\"weather-area-input-field\") area_input_field!: WeatherAreaInputField;\r\n\t@query(\"#current-location-btn\") current_location_btn!: HTMLButtonElement;\r\n\r\n\t#on_click_current_location = () => {\r\n\t\tnavigator.geolocation.getCurrentPosition(\r\n\t\t\t(position) => {\r\n\t\t\t\tconst { latitude, longitude } = position.coords;\r\n\r\n\t\t\t\tthis.#event_manager.dispatch(\"search\", {\r\n\t\t\t\t\tmethod: \"location\",\r\n\t\t\t\t\tlocation: { latitude, longitude },\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t() => {\r\n\t\t\t\tthis.#event_manager.dispatch(\"search\", {\r\n\t\t\t\t\tmethod: \"location\",\r\n\t\t\t\t\tlocation: null,\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t);\r\n\t};\r\n\r\n\t#on_close_dialog = () => {\r\n\t\tthis.open = false;\r\n\t\tthis.zipcode_input_field?.reset();\r\n\t\tthis.area_input_field?.reset();\r\n\t};\r\n\r\n\tprotected override render(): unknown {\r\n\t\tconst methods = this.search_methods\r\n\t\t\t.split(\",\")\r\n\t\t\t.map((method) => method.trim());\r\n\r\n\t\treturn html`\r\n\t\t\t<dialog ?open=${this.open}>\r\n\t\t\t\t<header>\r\n\t\t\t\t\t<h1><span>地域を検索する</span></h1>\r\n\t\t\t\t\t<button @click=${this.#on_close_dialog}>\r\n\t\t\t\t\t\t<span class=\"sr-only\">ダイアログを閉じる</span>\r\n\t\t\t\t\t\t<weather-icon name=\"close\" width=\"30px\" height=\"30px\"></weather-icon>\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</header>\r\n\t\t\t\t<div class=\"search-methods\">\r\n\t\t\t\t\t${methods.includes(\"current-location\") || methods.includes(\"all\")\r\n\t\t\t\t\t\t? html`\r\n\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\tpart=\"search\"\r\n\t\t\t\t\t\t\t\t\tclass=\"dialog-btn\"\r\n\t\t\t\t\t\t\t\t\tid=\"current-location-btn\"\r\n\t\t\t\t\t\t\t\t\ttype=\"button\"\r\n\t\t\t\t\t\t\t\t\t@click=${this.#on_click_current_location}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t現在地から取得する\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t  `\r\n\t\t\t\t\t\t: \"\"}\r\n\t\t\t\t\t${methods.includes(\"zipcode\") || methods.includes(\"all\")\r\n\t\t\t\t\t\t? html`\r\n\t\t\t\t\t\t\t\t<details open>\r\n\t\t\t\t\t\t\t\t\t<summary>郵便番号から取得する</summary>\r\n\t\t\t\t\t\t\t\t\t<weather-zipcode-input-field\r\n\t\t\t\t\t\t\t\t\t\texportparts=\"search, input\"\r\n\t\t\t\t\t\t\t\t\t></weather-zipcode-input-field>\r\n\t\t\t\t\t\t\t\t</details>\r\n\t\t\t\t\t\t  `\r\n\t\t\t\t\t\t: \"\"}\r\n\t\t\t\t\t${methods.includes(\"area\") || methods.includes(\"all\")\r\n\t\t\t\t\t\t? html`\r\n\t\t\t\t\t\t\t\t<details open>\r\n\t\t\t\t\t\t\t\t\t<summary>地域名から取得する</summary>\r\n\t\t\t\t\t\t\t\t\t<weather-area-input-field\r\n\t\t\t\t\t\t\t\t\t\texportparts=\"search, input\"\r\n\t\t\t\t\t\t\t\t\t\t.area_suggestions=${this.area_suggestions}\r\n\t\t\t\t\t\t\t\t\t\t.input_area_debounce=${this.input_area_debounce}\r\n\t\t\t\t\t\t\t\t\t></weather-area-input-field>\r\n\t\t\t\t\t\t\t\t</details>\r\n\t\t\t\t\t\t  `\r\n\t\t\t\t\t\t: \"\"}\r\n\t\t\t\t</div>\r\n\t\t\t</dialog>\r\n\t\t`;\r\n\t}\r\n\r\n\tstatic override styles = [\r\n\t\tbase_style,\r\n\t\tdialog_button_style,\r\n\t\tanimation_style,\r\n\t\tcss`\r\n\t\t\tdialog {\r\n\t\t\t\tpadding: 2rem;\r\n\t\t\t\tposition: absolute;\r\n\t\t\t\tinset: 0;\r\n\t\t\t\twidth: 100%;\r\n\t\t\t\theight: 100%;\r\n\t\t\t\tcolor: var(--_weather-widget-search-dialog-text);\r\n\t\t\t\tbackground: var(--_weather-widget-search-dialog-bg);\r\n\t\t\t\tz-index: 1;\r\n\t\t\t\tborder: 0;\r\n\t\t\t\tanimation: fade-out 0.3s ease-out;\r\n\t\t\t\tcontainer: dialog / inline-size;\r\n\t\t\t}\r\n\r\n\t\t\tdialog[open] {\r\n\t\t\t\tanimation: fade-in 0.3s ease-out;\r\n\t\t\t}\r\n\r\n\t\t\t@container widget (width < 326px) {\r\n\t\t\t\tdialog {\r\n\t\t\t\t\tpadding: 1rem;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\theader {\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\talign-items: center;\r\n\t\t\t\tmargin-block-end: 2rem;\r\n\r\n\t\t\t\th1 {\r\n\t\t\t\t\tflex-grow: 1;\r\n\r\n\t\t\t\t\tspan {\r\n\t\t\t\t\t\tfont-size: 1.5rem;\r\n\t\t\t\t\t\tdisplay: inline-block;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tsummary {\r\n\t\t\t\tfont-size: 1.2rem;\r\n\t\t\t\tcursor: pointer;\r\n\t\t\t}\r\n\r\n\t\t\t.search-methods {\r\n\t\t\t\tdisplay: grid;\r\n\t\t\t\tgap: 2rem;\r\n\r\n\t\t\t\tbutton {\r\n\t\t\t\t\twidth: fit-content;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t`,\r\n\t];\r\n}\r\n\r\ndeclare global {\r\n\tinterface HTMLElementTagNameMap {\r\n\t\t\"weather-search\": WeatherSearch;\r\n\t}\r\n}\r\n"]}